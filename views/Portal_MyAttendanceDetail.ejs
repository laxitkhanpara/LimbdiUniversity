<!doctype html>
<html lang="en">

<head>
  <%- include ('./UserPortal/vendar/Metahead.ejs') %>

</head>

<body>
  <!--  Body Wrapper -->
  <div class="page-wrapper" id="main-wrapper" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full"
    data-sidebar-position="fixed" data-header-position="fixed">
    <!-- Sidebar Start -->
    <%- include ('./UserPortal/vendar/sidebar.ejs') %>
      <!--  Sidebar End -->
      <!--  Main wrapper -->
      <div class="body-wrapper">
        <!--  Header Start -->
        <%- include ('./UserPortal/vendar/menubar.ejs') %>
          <!--  Header End -->
          <div class="container-fluid">
            <!--  Row 1 -->
            <div class="row">
              <div class="col-lg-8 ">
                <div class="card w-100">
                  <h5 class="card-title fw-semibold m-4">Attendance</h5>
                  <div class="card-body p-3 d-flex align-items-strech">

                    <div class="col-6 card bg-success bg-opacity-25 p-1 me-1">
                      <div class="table-responsive">
                        <table class="table text-nowrap mb-0 align-middle">
                          <thead class="text-dark fs-4">
                            <tr>
                              <th class="border-bottom-0">
                                <h6 class="fw-semibold mb-0">No</h6>
                              </th>
                              <th class="border-bottom-0">
                                <h6 class="fw-semibold mb-0">Date</h6>
                              </th>

                              <th class="border-bottom-0">
                                <h6 class="fw-semibold mb-0">Time</h6>
                              </th>
                              <th class="border-bottom-0">
                                <h6 class="fw-semibold mb-0">Status</h6>
                              </th>

                            </tr>
                          </thead>
                          <input name="year" hidden type="text" value="1">
                          <tbody>
                            <% var i=1 %>
                              <% presentDates.forEach((item)=>{ %>
                                <tr>
                                  <% const dateObj=new Date(item.date); %>
                                    <td class="border-bottom-0">
                                      <h6 class="fw-semibold mb-0">
                                        <%=i++%>
                                      </h6>
                                    </td>

                                    <td class="border-bottom-0">
                                      <p class="mb-0 fw-normal">
                                        <%=dateObj.getDate()%>/<%=dateObj.getMonth()%>/<%=dateObj.getFullYear()%>
                                      </p>
                                    </td>

                                    <td class="border-bottom-0">
                                      <p class="mb-0 fw-normal">
                                        <%= dateObj.getHours() %>:<%= dateObj.getMinutes() %>
                                      </p>
                                    </td>
                                    <td>
                                      <button type="button" class="btn btn-success m-1">Present</button>
                                    </td>

                                </tr>
                                <% }) %>
                          </tbody>

                        </table>
                      </div>
                    </div>
                    <div class="col-6 card bg-danger bg-opacity-25 p-1 ms-1">
                      <div class="table-responsive">
                        <table class="table text-nowrap mb-0 align-middle">
                          <thead class="text-dark fs-4">
                            <tr>
                              <th class="border-bottom-0">
                                <h6 class="fw-semibold mb-0">No</h6>
                              </th>
                              <th class="border-bottom-0">
                                <h6 class="fw-semibold mb-0">Date</h6>
                              </th>

                              <th class="border-bottom-0">
                                <h6 class="fw-semibold mb-0">Time</h6>
                              </th>
                              <th class="border-bottom-0">
                                <h6 class="fw-semibold mb-0">Status</h6>
                              </th>

                            </tr>
                          </thead>
                          <input name="year" hidden type="text" value="1">
                          <tbody>
                            <% var i=1 %>
                              <% absentDates.forEach((item)=>{ %>
                                <tr>
                                  <% const dateObj=new Date(item.date); %>
                                    <td class="border-bottom-0">
                                      <h6 class="fw-semibold mb-0">
                                        <%=i++%>
                                      </h6>
                                    </td>

                                    <td class="border-bottom-0">
                                      <p class="mb-0 fw-normal">
                                        <%=dateObj.getDate()%>/<%=dateObj.getMonth()%>/<%=dateObj.getFullYear()%>
                                      </p>
                                    </td>

                                    <td class="border-bottom-0">
                                      <p class="mb-0 fw-normal">
                                        <%= dateObj.getHours() %>:<%= dateObj.getMinutes() %>
                                      </p>
                                    </td>
                                    <td>
                                      <button type="button" class="btn btn-danger m-1">Absent</button>
                                    </td>

                                </tr>
                                <% }) %>
                          </tbody>

                        </table>
                      </div>
                    </div>

                  </div>
                </div>
                
              </div>
              <div class="col-lg-4">
                <div class="row">
                  <div class="col-lg-12">
                    <!-- Yearly Breakup -->
                    <div class="card overflow-hidden">
                      <div class="card-body p-4 text-center">
                        <div class="card-body p-4">
                          <h5 class="card-title mb-9 fw-semibold">Attendance</h5>
                          <div class="row align-items-center">
                            <div class="col-8">
                              <h4 class="fw-semibold mb-3">Present: <%=(presentDates.length /
                                  (presentDates.length+absentDates.length))*100 %>%</h4>
                              <h4 class="fw-semibold mb-3">Present: <%=100-((presentDates.length /
                                  (presentDates.length+absentDates.length))*100) %>%</h4>
                            </div>
                            <div class="col-4">
                              <div class="d-flex justify-content-center">
                                <div id="breakup"></div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="card">
                          <div class="card-header text-bg-primary h3">
                            Current year
                          </div>
                          <div class="card-body text-bg-light-primary">
                            <h1>
                              <%=(presentDates.length / (presentDates.length+absentDates.length))*100 %> %
                            </h1>
                          </div>
                        </div>

                      </div>
                    </div>
                  </div>
                </div>
              </div>

            </div>

          </div>
          <%- include ('./UserPortal/vendar/footer.ejs') %>

      </div>
  </div>





  <%- include ('./UserPortal/vendar/scripts.ejs') %>
</body>

</html>